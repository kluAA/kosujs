{"code":"!function(t){var s={};function e(i){if(s[i])return s[i].exports;var o=s[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&s&&\"string\"!=typeof t)for(var o in t)e.d(i,o,function(s){return t[s]}.bind(null,o));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,\"a\",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p=\"\",e(e.s=1)}([function(t,s){throw new Error(\"Module parse failed: Unexpected token (140:39)\\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\\n|         { pos: [520, 224], num: 4, sT: 51.5, hT: 52.411863, color: grey },\\n|         \\n>         { pos: [308, 185], num: 1, sT: , hT: 53.628692, color: },\\n|         { pos: [471, 187], num: 2, sT: , hT: 54.020811, color: },\\n|         { pos: [644, 187], num: 3, sT: , hT: 54.453834, color: },\")},function(t,s,e){\"use strict\";e.r(s);var i=class{constructor(t,s){this.color=t.color,this.radius=t.radius,this.posX=t.pos[0],this.posY=t.pos[1],this.number=t.number,this.sT=t.sT,this.hT=t.hT,this.eT=this.hT,this.currentTime=null,this.ctx=s}isInside(t,s){let e=this.posX-t,i=this.posY-s;return Math.pow(e,2)+Math.pow(i,2)<=this.radius*this.radius}setCurrentTime(t){this.currentTime=t}render(){const t=this.ctx;t.fillStyle=this.color,t.beginPath(),t.arc(this.posX,this.posY,this.radius,0,2*Math.PI),t.fill(),t.strokeStyle=\"white\",t.lineWidth=3,t.beginPath(),t.arc(this.posX,this.posY,this.radius,0,2*Math.PI),t.stroke(),t.fillStyle=\"white\",t.font=\"30px Arial\",t.textBaseline=\"middle\",t.fillText(this.number,this.posX-8,this.posY),this.currentTime>=this.sT&&this.currentTime<=this.hT&&(t.lineWidth=5,t.strokeStyle=this.color,t.beginPath(),t.arc(this.posX,this.posY,this.radius*(2.5*(this.hT-this.currentTime)+.95),0,2*Math.PI),t.stroke())}clear(t){console.log(\"hit!\")}},o=e(0);var h=class{constructor(t,s){this.color=t.color,this.radius=t.radius,this.posX=t.pos[0],this.posY=t.pos[1],this.endX=t.end[0],this.endY=t.end[1],this.number=t.number,this.sT=t.sT,this.hT=t.hT,this.eT=t.eT,this.currentTime=null,this.ctx=s}isInside(t,s){let e=this.posX+(this.endX-this.posX)*((this.currentTime-this.hT)/(this.eT-this.hT))-t,i=this.posY+(this.endY-this.posY)*((this.currentTime-this.hT)/(this.eT-this.hT))-s;return Math.pow(e,2)+Math.pow(i,2)<=this.radius*this.radius}setCurrentTime(t){this.currentTime=t}findSlope(){return(this.endY-this.posY)/(this.endX-this.posX)}findCurrentAngle(){return Math.atan(this.findSlope())}findConnectionPoints(){let t=this.findCurrentAngle(),s=t+Math.PI/2,e=t-Math.PI/2;return{firstStartPos:[this.posX+this.radius*Math.cos(s),this.posY+this.radius*Math.sin(s)],firstEndPos:[this.endX+this.radius*Math.cos(s),this.endY+this.radius*Math.sin(s)],secondStartPos:[this.posX+this.radius*Math.cos(e),this.posY+this.radius*Math.sin(e)],secondEndPos:[this.endX+this.radius*Math.cos(e),this.endY+this.radius*Math.sin(e)]}}drawTwoCircles(t){t.fillStyle=this.color,t.beginPath(),t.arc(this.posX,this.posY,this.radius,0,2*Math.PI),t.fill(),t.strokeStyle=\"white\",t.lineWidth=3,t.beginPath(),t.arc(this.posX,this.posY,this.radius,0,2*Math.PI),t.stroke(),t.fillStyle=\"white\",t.font=\"30px Arial\",t.textBaseline=\"middle\",t.fillText(this.number,this.posX-8,this.posY),t.fillStyle=this.color,t.beginPath(),t.arc(this.endX,this.endY,this.radius,0,2*Math.PI),t.fill(),t.strokeStyle=\"white\",t.lineWidth=3,t.beginPath(),t.arc(this.endX,this.endY,this.radius,0,2*Math.PI),t.stroke()}drawSliderLines(t){const s=this.findConnectionPoints();t.lineWidth=3,t.strokeStyle=\"white\",t.beginPath(),t.moveTo(s.firstStartPos[0],s.firstStartPos[1]),t.lineTo(s.firstEndPos[0],s.firstEndPos[1]),t.stroke(),t.beginPath(),t.moveTo(s.secondStartPos[0],s.secondStartPos[1]),t.lineTo(s.secondEndPos[0],s.secondEndPos[1]),t.stroke()}render(){const t=this.ctx;if(this.drawSliderLines(t),this.drawTwoCircles(t),this.currentTime>=this.hT&&this.currentTime<=this.eT){t.lineWidth=4,t.strokeStyle=\"yellow\",t.beginPath();let s=this.posX+(this.endX-this.posX)*((this.currentTime-this.hT)/(this.eT-this.hT)),e=this.posY+(this.endY-this.posY)*((this.currentTime-this.hT)/(this.eT-this.hT));t.arc(s,e,this.radius,0,2*Math.PI),t.stroke()}this.currentTime>=this.sT&&this.currentTime<=this.hT&&(t.lineWidth=5,t.strokeStyle=\"rgba(102, 95, 95, 0.404)\",t.beginPath(),t.arc(this.posX,this.posY,this.radius*(2.5*(this.hT-this.currentTime)+.95),0,2*Math.PI),t.stroke())}clear(t){console.log(\"hit!\")}};var n=class{constructor(t,s){this.mousePos={x:0,y:0},this.canvas=t,this.ctx=s,this.beatmap=o.Gurenge,this.objects=[],this.combo=1,this.keyDown=!1,this.keyUp=!0,this.score=0,this.load()}load(){this.combo=1,this.score=0,this.initializeSound(),this.recordMousePos(),this.handleKeyDown(),this.handleKeyUp(),this.play()}loadCircles(){this.beatmap.data.forEach(t=>{t.slider?this.objects.push(new h({color:t.color,radius:35,pos:t.pos,end:t.end,number:t.num,sT:t.sT,hT:t.hT,eT:t.eT},this.ctx)):this.objects.push(new i({color:t.color,radius:35,pos:t.pos,number:t.num,sT:t.sT,hT:t.hT},this.ctx))})}play(){document.getElementById(\"play\").addEventListener(\"click\",t=>{t.preventDefault(),this.sound.volume=.7,this.sound.play(),this.canvas.focus(),this.loadCircles(),this.animate()})}animate(t){this.sound.currentTime<this.sound.duration&&(this.ctx.clearRect(0,0,1e3,580),this.objects.forEach(t=>{if(this.sound.currentTime>=t.sT&&t.eT<=this.sound.currentTime){let s=this.getMouse();t instanceof h&&t.isInside(s.x,s.y)&&!this.keyUp&&(this.handleClear(!0,300),this.incrementCombo())}else t.sT<=this.sound.currentTime&&(t.setCurrentTime(this.sound.currentTime),t.render())}),this.renderScore(),this.renderCombo(),requestAnimationFrame(this.animate.bind(this)))}initializeSound(){this.sound=document.createElement(\"audio\"),this.sound.src=o.Gurenge.src,this.sound.setAttribute(\"preload\",\"auto\"),this.sound.setAttribute(\"controls\",\"none\"),document.body.appendChild(this.sound)}recordMousePos(){this.canvas.onmousemove=t=>{this.mousePos.x=t.pageX,this.mousePos.y=t.pageY}}handleKeyDown(){this.canvas.onkeydown=t=>{if(this.keyDown=!0,!this.keyUp)return;let s=this.getMouse();if(console.log(`{ pos: [${s.x}, ${s.y}], num: , sT: , hT: ${this.sound.currentTime}, color: },`),this.objects[0]instanceof i){this.objects[0].isInside(s.x,s.y)&&this.keyUp&&(this.objects[0].hT-.2<=this.sound.currentTime?(this.incrementCombo(),this.handleClear(!0,300)):this.objects[0].hT-.4<=this.sound.currentTime?(this.resetCombo(),this.handleClear(!0,100)):this.objects[0].hT-.5<=this.sound.currentTime?(this.resetCombo(),this.handleClear(!0,50)):(this.resetCombo(),this.handleClear()))}else if(this.objects[0]instanceof h){this.objects[0].isInside(s.x,s.y)&&this.keyUp&&this.sound.currentTime<=this.objects[0].hT+.1&&(this.objects[0].hT-.2<=this.sound.currentTime||this.sound.currentTime<=this.objects[0].hT+.1?(this.incrementCombo(),this.incrementScore(300),this.playHit()):this.objects[0].hT-.4<=this.sound.currentTime?(this.resetCombo(),this.incrementScore(100),this.playHit()):this.objects[0].hT-.5<=this.sound.currentTime?(this.resetCombo(),this.playHit()):this.resetCombo())}this.keyUp=!1}}incrementScore(t){this.score+=t*this.combo}incrementCombo(){this.combo+=1}resetCombo(){this.combo>=5?(this.playComboBreak(),this.combo=1):this.combo=1}renderScore(){this.ctx.font=\"bold 30px Arial\",this.ctx.textBaseline=\"middle\",this.ctx.textAlign=\"end\",this.ctx.fillStyle=\"white\",this.ctx.fillText(this.score,980,20),this.ctx.textAlign=\"start\"}renderCombo(){this.ctx.font=\"40px Arial\",this.ctx.fillStyle=\"white\",this.ctx.fillText(`${this.combo}x`,10,560)}handleKeyUp(){this.canvas.onkeyup=t=>{this.keyDown=!1,this.keyUp=!0}}handleClear(t,s){t?(this.playHit(),this.incrementScore(s),this.objects.shift()):(this.resetCombo(),this.objects.shift())}playHit(){this.hitSound=document.createElement(\"audio\"),this.hitSound.src=\"./dist/hit3.wav\",this.hitSound.setAttribute(\"preload\",\"auto\"),this.hitSound.setAttribute(\"controls\",\"none\"),this.hitSound.volume=.5,this.hitSound.style.display=\"none\",document.body.appendChild(this.hitSound),this.hitSound.play()}playComboBreak(){this.comboBreak=document.createElement(\"audio\"),this.comboBreak.src=\"./dist/combobreak.mp3\",this.comboBreak.setAttribute(\"preload\",\"auto\"),this.hitSound.setAttribute(\"controls\",\"none\"),this.comboBreak.style.display=\"none\",document.body.appendChild(this.comboBreak),this.comboBreak.play()}getMouse(){let t,s,e=this.canvas,i=0,o=0;if(void 0!==e.offsetParent)do{i+=e.offsetLeft,o+=e.offsetTop}while(e=e.offsetParent);return t=this.mousePos.x-i,s=this.mousePos.y-o,{x:t,y:s}}};document.addEventListener(\"DOMContentLoaded\",()=>{const t=document.getElementsByTagName(\"canvas\")[0];t.width=1e3,t.height=580,t.style.backgroundColor=\"black\",t.setAttribute(\"tabindex\",0),t.focus();const s=t.getContext(\"2d\");new n(t,s)})}]);","extractedComments":[]}